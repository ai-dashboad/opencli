# 🎯 立即手动测试指引

**创建时间**: 2026-02-04 17:57
**状态**: 应用已启动，等待手动测试

---

## ✅ 我（AI）已经完成的部分

### Backend测试 - 100% 完成 ✅

| 测试项 | 状态 | 结果 |
|--------|------|------|
| Daemon健康检查 | ✅ | `{"status":"healthy","timestamp":"2026-02-04T17:57:02.801862"}` |
| Daemon状态查询 | ✅ | 版本0.1.0，运行时间19小时，内存25.8MB |
| 端口监听 | ✅ | 9875和9876端口正常 |

**Backend完全正常，无需手动测试。**

### 应用启动状态

| 平台 | 状态 | 设备 |
|------|------|------|
| Android应用 | ✅ 正在运行 | emulator-5554 (Android 12) |
| macOS Menubar | ✅ 正在运行 | PID 56012 |
| iOS应用 | ❌ 未启动 | iPhone 16 Pro模拟器可用 |
| WebUI | ✅ 已在浏览器打开 | Chrome |

---

## ⚠️ 需要您手动完成的测试

### 🔴 优先级1: macOS Menubar测试（立即）

**当前状态**: 应用正在运行，但菜单项可能无法点击

**您需要做**:
1. 找到屏幕右上角的OpenCLI图标
2. 点击图标，查看菜单是否弹出
3. 尝试点击以下每个菜单项，记录是否可点击：

```
☐ AI Models - 应该打开主窗口
☐ Dashboard - 应该打开浏览器 localhost:3000/dashboard
☐ Web UI - 应该打开浏览器 localhost:3000
☐ Settings - 应该打开设置窗口
☐ Refresh Status - 状态应该更新
☐ Quit - 应用应该退出
```

**如果菜单项无法点击**:
```bash
# 运行重启脚本
cd /Users/cw/development/opencli
./scripts/restart_menubar.sh
```

**预期结果**: 所有菜单项都应该可以点击并执行相应操作

---

### 🟠 优先级2: Android应用测试（重要）

**当前状态**: 应用正在Android模拟器上运行（emulator-5554）

**您需要做**:
1. 打开Android模拟器窗口（应该已经在屏幕上）
2. 找到OpenCLI应用图标，点击打开（如果未打开）
3. 在应用中进行以下操作：

#### A. 连接状态检查（1分钟）
```
☐ 查看是否显示"Connected"或在线状态
☐ 查看是否显示daemon版本信息
☐ 确认没有"Connection refused"错误
```

#### B. 消息发送测试（2分钟）
```
☐ 找到消息输入框
☐ 输入文字："Hello from Android"
☐ 点击发送按钮
☐ 查看消息是否显示在界面上
☐ 等待30秒，查看是否收到AI响应
☐ 确认响应正确显示
```

#### C. 导航测试（1分钟）
```
☐ 点击底部导航栏（如果有）
☐ 切换不同页面，确认切换流畅
☐ 按设备返回键，确认正常
```

#### D. 任务测试（可选，2分钟）
```
☐ 尝试创建一个任务
☐ 提交任务
☐ 查看进度显示
```

**预期结果**: 所有操作都应该正常工作

---

### 🟡 优先级3: WebUI测试（重要）

**当前状态**: websocket-test.html已在Chrome中打开

**您需要做**:
1. 切换到Chrome浏览器窗口
2. 找到OpenCLI WebSocket测试页面
3. 进行以下操作：

#### A. 连接测试（1分钟）
```
☐ 查看URL输入框是否显示: ws://localhost:9875/ws
☐ 点击"Connect"按钮
☐ 查看连接状态是否变绿色
☐ 确认显示"Connected"
☐ 查看消息日志，确认收到欢迎消息
```

#### B. 预设按钮测试（3分钟）
```
☐ 点击"Get Status"按钮
   - 应该收到daemon状态响应
   - 查看消息日志验证

☐ 点击"Send Chat"按钮
   - 应该收到聊天响应
   - 查看消息日志验证

☐ 点击"Submit Task"按钮
   - 应该收到任务响应
   - 查看消息日志验证

☐ 点击"Invalid JSON"按钮
   - 应该收到错误响应
   - 查看消息日志验证
```

#### C. 自定义消息测试（2分钟）
```
☐ 在大文本框中输入JSON:
{
  "type": "command",
  "action": "get_status"
}
☐ 点击"Send"按钮
☐ 确认收到响应
```

#### D. 错误处理测试（可选）
```
☐ 停止daemon: pkill -f "dart.*daemon"
☐ 查看连接状态是否变红
☐ 重启daemon: cd daemon && dart bin/daemon.dart &
☐ 点击"Connect"重新连接
```

**预期结果**: 所有按钮都应该工作，消息日志应该显示响应

---

### 🔵 优先级4: iOS应用测试（可选，但重要）

**当前状态**: iOS应用未启动，模拟器可用

**您需要做**:

#### 1. 启动iOS应用（2-5分钟）
```bash
cd /Users/cw/development/opencli/opencli_app
flutter run -d "iPhone 16 Pro"
```

等待应用构建和启动完成（可能需要2-5分钟）

#### 2. 测试iOS应用（与Android测试相同）
```
☐ A. 连接状态检查
☐ B. 消息发送测试
☐ C. 导航测试
☐ D. 任务测试
```

**预期结果**: iOS应用应该与Android应用行为一致

---

## 📊 测试记录表

### macOS Menubar结果

| 菜单项 | 可点击？ | 预期行为是否正确？ | 备注 |
|--------|----------|-------------------|------|
| AI Models | ☐ 是 ☐ 否 | ☐ 是 ☐ 否 | |
| Dashboard | ☐ 是 ☐ 否 | ☐ 是 ☐ 否 | |
| Web UI | ☐ 是 ☐ 否 | ☐ 是 ☐ 否 | |
| Settings | ☐ 是 ☐ 否 | ☐ 是 ☐ 否 | |
| Refresh | ☐ 是 ☐ 否 | ☐ 是 ☐ 否 | |
| Quit | ☐ 是 ☐ 否 | ☐ 是 ☐ 否 | |

**通过数**: ___ / 6

### Android测试结果

| 测试项 | 通过？ | 备注 |
|--------|--------|------|
| 连接状态显示 | ☐ 是 ☐ 否 | |
| 输入框可输入 | ☐ 是 ☐ 否 | |
| 发送按钮可点击 | ☐ 是 ☐ 否 | |
| 消息显示在界面 | ☐ 是 ☐ 否 | |
| 收到AI响应 | ☐ 是 ☐ 否 | |
| 底部导航可用 | ☐ 是 ☐ 否 | |
| 页面切换流畅 | ☐ 是 ☐ 否 | |
| 返回键正常 | ☐ 是 ☐ 否 | |

**通过数**: ___ / 8+

### WebUI测试结果

| 测试项 | 通过？ | 备注 |
|--------|--------|------|
| Connect按钮 | ☐ 是 ☐ 否 | |
| 连接状态显示 | ☐ 是 ☐ 否 | |
| Get Status按钮 | ☐ 是 ☐ 否 | |
| Send Chat按钮 | ☐ 是 ☐ 否 | |
| Submit Task按钮 | ☐ 是 ☐ 否 | |
| 自定义消息发送 | ☐ 是 ☐ 否 | |

**通过数**: ___ / 6+

### iOS测试结果

| 测试项 | 通过？ | 备注 |
|--------|--------|------|
| 应用启动 | ☐ 是 ☐ 否 ☐ 未测试 | |
| 连接daemon | ☐ 是 ☐ 否 ☐ 未测试 | |
| 消息发送 | ☐ 是 ☐ 否 ☐ 未测试 | |
| 导航功能 | ☐ 是 ☐ 否 ☐ 未测试 | |

**通过数**: ___ / 4+

---

## 🎯 测试后的下一步

### 如果所有测试通过 ✅
恭喜！系统所有核心功能都正常工作。

### 如果发现问题 ❌
请记录：
1. 哪个平台？
2. 哪个功能？
3. 期望什么？
4. 实际发生什么？
5. 截图或日志？

---

## ⏱️ 预计时间

| 测试项 | 预计时间 |
|--------|----------|
| macOS Menubar | 2-3分钟 |
| Android应用 | 5-8分钟 |
| WebUI | 5-8分钟 |
| iOS应用 | 10-15分钟（含启动时间） |
| **总计** | **22-34分钟** |

---

## 🚨 重要提醒

1. **这些测试必须您亲自完成** - AI无法点击屏幕或输入文字
2. **请如实记录结果** - 不要跳过失败的测试
3. **截图问题** - 遇到问题时请截图
4. **测试顺序建议** - 按优先级1→2→3→4进行

---

**准备好了吗？请开始测试！** 🚀
